(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{302:function(e,t,a){"use strict";window.location.hostname;a.d(t,"b",function(){return r}),a.d(t,"c",function(){return o}),a.d(t,"a",function(){return c});var n=Object({NODE_ENV:"production",PUBLIC_URL:""}).MY_ENV||"dev",r={dev:{api:"https://www.easy-mock.com/mock/5c09dc3357b1777d53e590c8/admin",imgPrefix:"http://wxpt.localhome.cn",newImagePrefix:"http://120.78.15.214",designImagePrefix:"http://qy.localhome.com.cn/locals",fileUrl:"http://120.76.204.105"},uat:{api:"http://uat.localhome.cn/api",imgPrefix:"http://wxpt.localhome.cn",newImagePrefix:"http://120.78.15.214",designImagePrefix:"http://qy.localhome.com.cn/locals",fileUrl:"http://120.76.204.105"},prod:{api:"http://ms.localhome.cn/api",imgPrefix:"http://app.localhome.cn",newImagePrefix:"http://120.76.204.105",designImagePrefix:"http://qy.localhome.com.cn/locals",fileUrl:"http://120.76.204.105"}};r=r[n];var o={tel:/^1[3|4|5|7|8][0-9]\d{8}$/,chinese:/[\u4e00-\u9fa5]{1}/,int:/^[1-9]\d*$/,intDot:/^([1-9]\d*|0)(\.\d{1,2})?$/};function c(e){var t={};for(var a in e)e[a]&&(e[a].constructor===String&&e[a]?t[a]=e[a]:e[a].constructor===Array&&e[a].length>0&&(t[a]=e[a]));return t}},319:function(e,t,a){"use strict";var n=a(320),r=a.n(n),o=a(323),c=a(324),i=a.n(c),s=a(302),l=["/api/oauth2/token"],u=function e(t,a,n){if(null==t)return"";var r="",o=typeof t;if("string"===o||"number"===o||"boolean"===o)r+="&"+a+"="+(null==n||n?encodeURIComponent(t):t);else for(var c in t){var i=null==a?c:a+(t instanceof Array?"["+c+"]":"."+c);r+=e(t[c],i,n)}return r},p=function(e,t,a){e=e.toUpperCase();var n="";n=t.indexOf("http")>=0?t:s.b.api+t;var r=function(e,t){if("UPLOAD"===t)return{Accept:"*/*","Access-Control-Allow-Origin":"*","Access-Control-Allow-Headers":"X-Requested-With"};return JSON.parse(localStorage.getItem("token"))&&l.includes(e),{Accept:"application/json, */*","Content-Type":"application/json"}}(t,e);return"UPLOAD"===e&&(e="POST"),new Promise(function(t,o){i()({url:n,method:e,headers:r,data:a}).then(function(e){if(console.log(e),e.ok||200===e.status)return e.data;o({status:e.status})}).then(function(e){t(e),e&&e.IsSucceed||o(e)}).catch(function(e){o(e)})})};t.a={get:function(){var e=Object(o.a)(r.a.mark(function e(t,a,n){var o;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n?t+="/"+a:(o=u(a).substr(1))&&(t+="?"+o),e.abrupt("return",p("get",t));case 2:case"end":return e.stop()}},e,this)}));return function(t,a,n){return e.apply(this,arguments)}}(),post:function(){var e=Object(o.a)(r.a.mark(function e(t,a){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",p("post",t,a));case 1:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}(),put:function(){var e=Object(o.a)(r.a.mark(function e(t,a){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=JSON.stringify(a),e.abrupt("return",p("put",t,a));case 2:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}(),delete:function(){var e=Object(o.a)(r.a.mark(function e(t,a,n){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=3;break}return t+="/"+a,e.abrupt("return",p("delete",t));case 3:return e.abrupt("return",p("delete",t,a));case 4:case"end":return e.stop()}},e,this)}));return function(t,a,n){return e.apply(this,arguments)}}(),uploadPost:function(){var e=Object(o.a)(r.a.mark(function e(t,a){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",p("upload",t,a));case 1:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}()}},488:function(e,t,a){},651:function(e,t,a){"use strict";a.r(t);var n=a(29),r=a(30),o=a(33),c=a(31),i=a(32),s=a(1),l=a.n(s),u=(a(64),a(86)),p=a.n(u),d=(a(133),a(90)),m=a.n(d),h=(a(93),a(14)),f=a.n(h),g=(a(414),a(487)),b=a.n(g),v=a(46),y=(a(317),a(343)),O=a.n(y),k=(a(303),a(304)),w=a.n(k),j=a(655),E=a(319),S=a(61),C=a(92),N=function(e){function t(){var e;return Object(n.a)(this,t),(e=Object(o.a)(this,Object(c.a)(t).call(this))).state={tel:"",countdown:0},e.getCode=e.getCode.bind(Object(v.a)(Object(v.a)(e))),e.inputChange=e.inputChange.bind(Object(v.a)(Object(v.a)(e))),e}return Object(i.a)(t,e),Object(r.a)(t,[{key:"inputChange",value:function(e){var t=e.target.value;this.setState({tel:t}),this.props.changeState(Object(C.a)({},this.props.changeKey||"tel",t))}},{key:"changeCountdown",value:function(e){var t=this;e>=0&&window.setTimeout(function(){t.setState({countdown:e},function(){e>0&&t.changeCountdown(e-1)})},1e3)}},{key:"getCode",value:function(){}},{key:"render",value:function(){var e=this.state.countdown,t=this.props.addonBefore;return l.a.createElement(m.a,{addonBefore:t?l.a.createElement(f.a,{type:t}):null,addonAfter:l.a.createElement("span",{className:"cup",style:{width:"70px",display:"inline-block"},onClick:this.getCode},e>0?e.toString():"\u83b7\u53d6\u9a8c\u8bc1\u7801"),maxLength:11,placeholder:"\u8bf7\u8f93\u5165\u624b\u673a\u53f7\u7801",onChange:this.inputChange})}}]),t}(s.Component),x=a(302),P=w.a.TabPane,I=O.a.Item,L=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(o.a)(this,Object(c.a)(t).call(this,e))).state={loginType:"pass",buttonLoading:!1,userName:"",password:"",tel:"",code:"",formValues:{}},a.tabsChange=a.tabsChange.bind(Object(v.a)(Object(v.a)(a))),a.handleSubmit=a.handleSubmit.bind(Object(v.a)(Object(v.a)(a))),a.loginClick=a.loginClick.bind(Object(v.a)(Object(v.a)(a))),a.loginSuccess=a.loginSuccess.bind(Object(v.a)(Object(v.a)(a))),a.loginError=a.loginError.bind(Object(v.a)(Object(v.a)(a))),a.changeFormState=a.changeFormState.bind(Object(v.a)(Object(v.a)(a))),a}return Object(i.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){localStorage.removeItem("token"),localStorage.removeItem("one")}},{key:"tabsChange",value:function(e){this.setState({loginType:e})}},{key:"loginClick",value:function(){}},{key:"changeState",value:function(e,t){this.setState(e,function(){t&&t()})}},{key:"changeFormState",value:function(e){this.props.form.setFieldsValue(e)}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),this.props.form.validateFieldsAndScroll(function(e,a){e||t.setState({buttonLoading:!0,formValues:a},function(){"pass"===t.state.loginType?t.passLogin(a):t.codeLogin(a)})})}},{key:"passLogin",value:function(e){var t,a={username:e.userName,password:e.password};(t=a,E.a.post("/login",t)).then(this.loginSuccess).catch(this.loginError)}},{key:"codeLogin",value:function(e){}},{key:"loginSuccess",value:function(e){console.log("loginSuccess---\x3e",e),e.code?(b.a.success("\u767b\u5f55\u6210\u529f\uff01"),localStorage.setItem("token",JSON.stringify(e.code.token)),this.props.history.push("/library".concat(S.c[0].path))):b.a.error("\u8d26\u53f7\u6216\u5bc6\u7801\u4e0d\u6b63\u786e\uff01"),this.setState({buttonLoading:!1})}},{key:"loginError",value:function(e){this.setState({buttonLoading:!1})}},{key:"render",value:function(){var e=this.state,t=e.loginType,a=e.buttonLoading,n=this.props.form.getFieldDecorator;return l.a.createElement(w.a,{defaultActiveKey:t,onChange:this.tabsChange},l.a.createElement(P,{tab:"\u5bc6\u7801\u767b\u5f55",key:"pass",className:"passBox"},l.a.createElement(O.a,{onSubmit:this.handleSubmit},l.a.createElement(I,{className:"dfadf"},n("userName",{rules:[{required:"pass"===t,message:"\u8bf7\u8f93\u5165\u7528\u6237\u540d!"}]})(l.a.createElement(m.a,{addonBefore:l.a.createElement(f.a,{type:"user"}),placeholder:"\u8bf7\u8f93\u5165\uff1a admin"}))),l.a.createElement(I,{className:"dfadf"},n("password",{rules:[{required:"pass"===t,message:"\u8bf7\u8f93\u5165\u5bc6\u7801!"}]})(l.a.createElement(m.a,{type:"password",className:"ffff",addonBefore:l.a.createElement(f.a,{type:"lock"}),placeholder:"\u8bf7\u8f93\u5165\uff1a 123456"}))),l.a.createElement(p.a,{type:"primary",className:"width100 mt10",loading:a,onClick:this.loginClick,htmlType:"submit"},"\u767b\u5f55"),l.a.createElement("div",{className:"mt20 tips"},"\u7528\u6237\u540d\u5bc6\u7801\u767b\u5f55"))),l.a.createElement(P,{tab:"\u624b\u673a\u767b\u5f55",key:"tel",className:"telBox"},l.a.createElement(O.a,{onSubmit:this.handleSubmit},l.a.createElement(I,null,n("tel",{rules:[{required:"tel"===t,message:"\u8bf7\u8f93\u5165\u624b\u673a\u53f7\u7801!"},{pattern:x.c.tel,message:"\u8bf7\u8f93\u5165\u6b63\u786e\u624b\u673a\u53f7\u7801!"}]})(l.a.createElement(N,{changeState:this.changeFormState,addonBefore:"user"}))),l.a.createElement(I,null,n("code",{rules:[{required:"tel"===t,message:"\u8bf7\u8f93\u5165\u9a8c\u8bc1\u7801!"}]})(l.a.createElement(m.a,{addonBefore:l.a.createElement(f.a,{type:"lock"}),placeholder:"\u8bf7\u8f93\u5165\u9a8c\u8bc1\u7801"}))),l.a.createElement(p.a,{type:"primary",className:"width100 mt10",loading:a,onClick:this.loginClick,htmlType:"submit"},"\u767b\u5f55"),l.a.createElement("div",{className:"mt20 tips"},"\u624b\u673a\u53f7\u83b7\u53d6\u8ba4\u8bc1\u7801\u767b\u5f55"))))}}]),t}(s.Component),A=Object(j.a)(O.a.create()(L)),T=a(57),B=(a(488),function(e){function t(){return Object(n.a)(this,t),Object(o.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(i.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return l.a.createElement("div",{className:"login-page"},l.a.createElement("div",{className:"login-content"},l.a.createElement("div",{className:"ivu-card"},l.a.createElement("div",{className:"ivu-card-head"},l.a.createElement("p",null,l.a.createElement("i",{className:"iconfont icon-login mr10"}),"react \u77e5\u8bc6\u7ba1\u7406")),l.a.createElement("div",{className:"ivu-card-body"},l.a.createElement(A,null)))))}}]),t}(s.Component));t.default=Object(T.b)(function(e){return{responsive:e.responsiveData}})(B)}}]);
//# sourceMappingURL=login.e281aa6e.chunk.js.map